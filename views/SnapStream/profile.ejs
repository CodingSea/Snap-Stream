<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/main.css">
</head>
<body>
    <%- include("../partials/tabs") %>
    <%- include("../partials/post")  %>

    <header>
        <a href="/snap-stream/new" class="addPost"><button>Add Post</button></a>
    </header>

    <% if(foundUser.email != currentUser.email) { %>
        <div class="other-profile">
            <% if(foundUser.profileImage) {%>
                <img src="<%= foundUser.profileImage %>">
            <% } else { %>
                <img src="/images/person.png">
            <% } %>

            <h1><%= foundUser.username %></h1>
            <ul>
                <li>Posts: <%= allPosts.length %></li>
                <li>Following: <%= foundUser.following.length %></li>
                <li>Followers: <%= foundUser.followers.length %></li>
            </ul>

            <br>
            <form action="/snap-stream/profile/<%= foundUser._id %>/followBtn" method="post">
                <input type="button" name="followBtn" id="followBtn" value="Follow">
            </form>
        </div>
    <% } %>

    <div class="container">
        <% allPosts.forEach((post) => { %>
            <div class="post">
                <a href="/snap-stream/<%= post._id %>">
                    <img src="<%= post.image %>" alt="post-image">
                </a>
            </div>
        <% }); %>
    </div>
    
</body>
</html>